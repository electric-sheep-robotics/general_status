import{r as l,j as d,a as w,A as T,b as $,F as A,R as D,c as O,d as P}from"./vendor.e9cef478.js";const E=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const g of i.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&m(g)}).observe(document,{childList:!0,subtree:!0});function a(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function m(o){if(o.ep)return;o.ep=!0;const i=a(o);fetch(o.href,i)}};E();const M={debugItems:[{stream:"can.follow",type:"string",name:"Can follow",state:"-"},{stream:"north.heading",type:"string",name:"Heading from North",state:"-"},{stream:"path.name",type:"string",name:"Path Name",state:"-"},{stream:"completion.fraction",type:"string",name:"Completion fraction",state:"-"},{stream:"gpsfix.state",type:"string",name:"Fix Status",state:"-"},{stream:"latitude.rad",type:"string",name:"Latitude",state:"-"},{stream:"longitude.rad",type:"string",name:"Longitude",state:"-"}]},j="_table_176v2_1";var H={table:j};class I extends l.exports.Component{render(){return d("table",{style:{gridTemplateColumns:`repeat(${this.props.columns}, 1fr)`},className:H.table,children:this.props.children})}}const R="_header_1rzw6_1";var B={header:R};class q extends l.exports.Component{render(){return d("thead",{children:d("tr",{children:this.props.headers.map((e,a)=>d("th",{className:B.header,children:e},a))})})}}class z extends l.exports.Component{render(){return d("tbody",{children:this.props.children})}}const K="_row_d10ys_1";var G={row:K};class J extends l.exports.Component{render(){return d("tr",{className:G.row,children:this.props.children})}}var b={"data-cell":"_data-cell_2wvbm_1","data-cell-name":"_data-cell-name_2wvbm_8","data-cell-unknown":"_data-cell-unknown_2wvbm_11","data-cell-critical":"_data-cell-critical_2wvbm_25","data-cell-good":"_data-cell-good_2wvbm_39","data-cell-bad":"_data-cell-bad_2wvbm_53"};class N extends l.exports.Component{render(){return d("td",{className:`${b["data-cell"]} ${b[`data-cell-${this.props.type}`]}`,children:this.props.content})}}const Q=(n,e)=>n==="Can follow"&&(e==null?void 0:e.canFollow)===void 0?["-","unknown"]:n==="Can follow"&&(e==null?void 0:e.canFollow)!==void 0?[e==null?void 0:e.canFollow,"good"]:n==="Heading from North"&&(e==null?void 0:e.headingFromNorth)===void 0?["-","unknown"]:n==="Heading from North"&&(e==null?void 0:e.headingFromNorth)!==void 0?[e==null?void 0:e.headingFromNorth,"good"]:n==="Path Name"&&(e==null?void 0:e.pathName)===void 0?["-","unknown"]:n==="Path Name"&&(e==null?void 0:e.pathName)!==void 0?[e==null?void 0:e.pathName,"good"]:n==="Completion fraction"&&(e==null?void 0:e.completionFraction)===void 0?["-","unknown"]:n==="Completion fraction"&&(e==null?void 0:e.completionFraction)!==void 0?[e==null?void 0:e.completionFraction,"good"]:n==="Fix Status"&&(e==null?void 0:e.fixStatus)===void 0?["-","unknown"]:n==="Fix Status"&&(e==null?void 0:e.fixStatus)!==void 0?[e==null?void 0:e.fixStatus,"good"]:n==="Latitude"&&(e==null?void 0:e.latitude)===void 0?["-","unknown"]:n==="Latittude"&&(e==null?void 0:e.latitude)!==void 0?[e==null?void 0:e.latitude,"good"]:n==="Longitude"&&(e==null?void 0:e.longitude)===void 0?["-","unknown"]:n==="Longitude"&&(e==null?void 0:e.longitude)!==void 0?[e==null?void 0:e.longitude,"good"]:["-","unknown"],U=({tableHeaders:n,topicStats:e})=>w(I,{columns:n.length,children:[d(q,{headers:n}),d(z,{children:M.debugItems.map((a,m)=>{const o=Q(a.name,e);return w(J,{children:[d(N,{content:a.name}),d(N,{content:o[0].toString(),type:o[1]})]},m)})})]}),W=({device:n})=>{const[e,a]=l.exports.useState(),[m,o]=l.exports.useState(),[i,g]=l.exports.useState(),[F,v]=l.exports.useState(),[C,c]=l.exports.useState(),[L,x]=l.exports.useState(),[_,y]=l.exports.useState(),[f]=l.exports.useState(10);l.exports.useEffect(()=>{T.addModuleDataListener(k)},[n]);const h=(t,u,s)=>t+s*1e3<u,k=async t=>{const u=t.streams;if(Object.keys(u).length===0)throw new Error("No streams.");Object.keys(u).forEach(s=>{const r=X(u,s);if(r.length===2&&r[1]!==void 0){if(u[s].data[0].name==="can.follow"&&r[1]!==void 0){if(h(r[0],t.time,f)){a(void 0);return}a(r[1])}if(u[s].data[0].name==="north.heading"&&r[1]!==void 0){if(h(r[0],t.time,f)){o(void 0);return}o(r[1])}if(u[s].data[0].name==="path.name"&&r[1]!==void 0){if(h(r[0],t.time,f)){g(void 0);return}g(r[1])}if(u[s].data[0].name==="completion.fraction"&&r[1]!==void 0){if(h(r[0],t.time,f)){v(void 0);return}v(r[1])}if(u[s].data[0].name==="gpsfix.state"&&r[1]!==void 0){if(h(r[0],t.time,f)){c(void 0);return}c(r[1])}if(u[s].data[0].name==="latitude.rad"&&r[1]!==void 0){if(h(r[0],t.time,f)){x(void 0);return}x(r[1])}if(u[s].data[0].name==="longitude.rad"&&r[1]!==void 0){if(h(r[0],t.time,f)){y(void 0);return}y(r[1])}}})};return d(U,{tableHeaders:["Item","Status"],topicStats:{canFollow:e,headingFromNorth:m,pathName:i,completionFraction:F,fixStatus:C,latitude:L,longitude:_}})},X=(n,e)=>{if(n[e]===void 0)return"No stream.";if(n[e].loading)return;if(n[e].tooMuchData)return"Too much data.";if(n[e].data.length===0)return"No data.";const a=n[e].data[0].points.at(-1);return a||"No datapoints."};function Y(){const[n,e]=l.exports.useState();l.exports.useEffect(()=>{a()},[]);const a=async()=>{if(await $.waitTilAuthenticated()){const m=await A.getCurrentDevice();e(m)}};return d("div",{className:"App",children:d(W,{device:n})})}D.render(d(O,{type:"module",children:d(P.StrictMode,{children:d(Y,{})})}),document.getElementById("root"));
