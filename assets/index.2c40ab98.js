import{r as d,j as l,a as b,A as $,b as A,F as D,R as O,c as P,d as M}from"./vendor.e9cef478.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&f(g)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerpolicy&&(u.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?u.credentials="include":o.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function f(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}};j();const H={debugItems:[{stream:"can.follow",type:"string",name:"Can follow",state:"-"},{stream:"north.heading",type:"string",name:"Heading from North",state:"-"},{stream:"path.name",type:"string",name:"Path Name",state:"-"},{stream:"completion.fraction",type:"string",name:"Completion fraction",state:"-"},{stream:"gpsfix.state",type:"string",name:"Fix Status",state:"-"},{stream:"latitude.rad",type:"string",name:"Latitude",state:"-"},{stream:"longitude.rad",type:"string",name:"Longitude",state:"-"},{stream:"crosstrack.err",type:"string",name:"Crosstrack error",state:"-"}]},I="_table_176v2_1";var R={table:I};class B extends d.exports.Component{render(){return l("table",{style:{gridTemplateColumns:`repeat(${this.props.columns}, 1fr)`},className:R.table,children:this.props.children})}}const q="_header_1rzw6_1";var z={header:q};class K extends d.exports.Component{render(){return l("thead",{children:l("tr",{children:this.props.headers.map((e,a)=>l("th",{className:z.header,children:e},a))})})}}class G extends d.exports.Component{render(){return l("tbody",{children:this.props.children})}}const J="_row_d10ys_1";var Q={row:J};class U extends d.exports.Component{render(){return l("tr",{className:Q.row,children:this.props.children})}}var N={"data-cell":"_data-cell_2wvbm_1","data-cell-name":"_data-cell-name_2wvbm_8","data-cell-unknown":"_data-cell-unknown_2wvbm_11","data-cell-critical":"_data-cell-critical_2wvbm_25","data-cell-good":"_data-cell-good_2wvbm_39","data-cell-bad":"_data-cell-bad_2wvbm_53"};class C extends d.exports.Component{render(){return l("td",{className:`${N["data-cell"]} ${N[`data-cell-${this.props.type}`]}`,children:this.props.content})}}const W=(r,e)=>r==="Can follow"&&(e==null?void 0:e.canFollow)===void 0?["-","unknown"]:r==="Can follow"&&(e==null?void 0:e.canFollow)!==void 0?[e==null?void 0:e.canFollow,"good"]:r==="Heading from North"&&(e==null?void 0:e.headingFromNorth)===void 0?["-","unknown"]:r==="Heading from North"&&(e==null?void 0:e.headingFromNorth)!==void 0?[e==null?void 0:e.headingFromNorth,"good"]:r==="Path Name"&&(e==null?void 0:e.pathName)===void 0?["-","unknown"]:r==="Path Name"&&(e==null?void 0:e.pathName)!==void 0?[e==null?void 0:e.pathName,"good"]:r==="Crosstrack error"&&(e==null?void 0:e.crosstrackError)===void 0?["-","unknown"]:r==="Crosstrack error"&&(e==null?void 0:e.crosstrackError)!==void 0?[e==null?void 0:e.crosstrackError,"good"]:r==="Completion fraction"&&(e==null?void 0:e.completionFraction)===void 0?["-","unknown"]:r==="Completion fraction"&&(e==null?void 0:e.completionFraction)!==void 0?[e==null?void 0:e.completionFraction,"good"]:r==="Fix Status"&&(e==null?void 0:e.fixStatus)===void 0?["-","unknown"]:r==="Fix Status"&&(e==null?void 0:e.fixStatus)!==void 0?[e==null?void 0:e.fixStatus,"good"]:r==="Latitude"&&(e==null?void 0:e.latitude)===void 0?["-","unknown"]:r==="Latitude"&&(e==null?void 0:e.latitude)!==void 0?[e==null?void 0:e.latitude,"good"]:r==="Longitude"&&(e==null?void 0:e.longitude)===void 0?["-","unknown"]:r==="Longitude"&&(e==null?void 0:e.longitude)!==void 0?[e==null?void 0:e.longitude,"good"]:["-","unknown"],X=({tableHeaders:r,topicStats:e})=>b(B,{columns:r.length,children:[l(K,{headers:r}),l(G,{children:H.debugItems.map((a,f)=>{const o=W(a.name,e);return b(U,{children:[l(C,{content:a.name}),l(C,{content:o[0].toString(),type:o[1]})]},f)})})]}),Y=({device:r})=>{const[e,a]=d.exports.useState(),[f,o]=d.exports.useState(),[u,g]=d.exports.useState(),[k,v]=d.exports.useState(),[F,c]=d.exports.useState(),[L,x]=d.exports.useState(),[_,y]=d.exports.useState(),[E,w]=d.exports.useState(),[t]=d.exports.useState(10);d.exports.useEffect(()=>{$.addModuleDataListener(T)},[r]);const h=(s,i,m)=>s+m*1e3<i,T=async s=>{const i=s.streams;if(Object.keys(i).length===0)throw new Error("No streams.");Object.keys(i).forEach(m=>{const n=Z(i,m);if(n.length===2&&n[1]!==void 0){if(i[m].data[0].name==="can.follow"&&n[1]!==void 0){if(h(n[0],s.time,t)){a(void 0);return}a(n[1])}if(i[m].data[0].name==="north.heading"&&n[1]!==void 0){if(h(n[0],s.time,t)){o(void 0);return}o(n[1])}if(i[m].data[0].name==="path.name"&&n[1]!==void 0){if(h(n[0],s.time,t)){g(void 0);return}g(n[1])}if(i[m].data[0].name==="crosstrack.err"&&n[1]!==void 0){if(h(n[0],s.time,t)){v(void 0);return}v(n[1])}if(i[m].data[0].name==="completion.fraction"&&n[1]!==void 0){if(h(n[0],s.time,t)){c(void 0);return}c(n[1])}if(i[m].data[0].name==="gpsfix.state"&&n[1]!==void 0){if(h(n[0],s.time,t)){x(void 0);return}x(n[1])}if(i[m].data[0].name==="latitude.rad"&&n[1]!==void 0){if(h(n[0],s.time,t)){y(void 0);return}console.log(n[1]),y(n[1])}if(i[m].data[0].name==="longitude.rad"&&n[1]!==void 0){if(h(n[0],s.time,t)){w(void 0);return}w(n[1])}}})};return l(X,{tableHeaders:["Item","Status"],topicStats:{canFollow:e,headingFromNorth:f,pathName:u,crosstrackError:k,completionFraction:F,fixStatus:L,latitude:_,longitude:E}})},Z=(r,e)=>{if(r[e]===void 0)return"No stream.";if(r[e].loading)return;if(r[e].tooMuchData)return"Too much data.";if(r[e].data.length===0)return"No data.";const a=r[e].data[0].points.at(-1);return a||"No datapoints."};function V(){const[r,e]=d.exports.useState();d.exports.useEffect(()=>{a()},[]);const a=async()=>{if(await A.waitTilAuthenticated()){const f=await D.getCurrentDevice();e(f)}};return l("div",{className:"App",children:l(Y,{device:r})})}O.render(l(P,{type:"module",children:l(M.StrictMode,{children:l(V,{})})}),document.getElementById("root"));
